{"version":"tree-0.1","tree":{"id":"App","path":"","constructInfo":{"fqn":"aws-cdk-lib.App","version":"2.238.0"},"children":{"EstimationBackendStack":{"id":"EstimationBackendStack","path":"EstimationBackendStack","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.238.0"},"children":{"BackendRepo":{"id":"BackendRepo","path":"EstimationBackendStack/BackendRepo","constructInfo":{"fqn":"aws-cdk-lib.aws_ecr.RepositoryBase","version":"2.238.0"}},"UserPool":{"id":"UserPool","path":"EstimationBackendStack/UserPool","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.UserPool","version":"2.238.0"},"children":{"Resource":{"id":"Resource","path":"EstimationBackendStack/UserPool/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.CfnUserPool","version":"2.238.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Cognito::UserPool","aws:cdk:cloudformation:props":{"accountRecoverySetting":{"recoveryMechanisms":[{"name":"verified_phone_number","priority":1},{"name":"verified_email","priority":2}]},"adminCreateUserConfig":{"allowAdminCreateUserOnly":false},"autoVerifiedAttributes":["email"],"emailVerificationMessage":"The verification code to your new account is {####}","emailVerificationSubject":"Verify your new account","schema":[{"name":"email","mutable":true,"required":true}],"smsVerificationMessage":"The verification code to your new account is {####}","usernameAttributes":["email"],"userPoolName":"estimation-backend-users","verificationMessageTemplate":{"defaultEmailOption":"CONFIRM_WITH_CODE","emailMessage":"The verification code to your new account is {####}","emailSubject":"Verify your new account","smsMessage":"The verification code to your new account is {####}"}}}}}},"UserPoolClient":{"id":"UserPoolClient","path":"EstimationBackendStack/UserPoolClient","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.UserPoolClient","version":"2.238.0"},"children":{"Resource":{"id":"Resource","path":"EstimationBackendStack/UserPoolClient/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.CfnUserPoolClient","version":"2.238.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Cognito::UserPoolClient","aws:cdk:cloudformation:props":{"allowedOAuthFlows":["implicit","code"],"allowedOAuthFlowsUserPoolClient":true,"allowedOAuthScopes":["profile","phone","email","openid","aws.cognito.signin.user.admin"],"callbackUrLs":["https://example.com"],"explicitAuthFlows":["ALLOW_USER_PASSWORD_AUTH","ALLOW_ADMIN_USER_PASSWORD_AUTH","ALLOW_USER_SRP_AUTH","ALLOW_REFRESH_TOKEN_AUTH"],"generateSecret":false,"supportedIdentityProviders":["COGNITO"],"userPoolId":{"Ref":"UserPool6BA7E5F2"}}}}}},"AppRunnerEcrAccessRole":{"id":"AppRunnerEcrAccessRole","path":"EstimationBackendStack/AppRunnerEcrAccessRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.238.0"},"children":{"Resource":{"id":"Resource","path":"EstimationBackendStack/AppRunnerEcrAccessRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.238.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"build.apprunner.amazonaws.com"}}],"Version":"2012-10-17"},"description":"App Runner access role for ECR image pulls","managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSAppRunnerServicePolicyForECRAccess"]]}]}}}}},"BackendService":{"id":"BackendService","path":"EstimationBackendStack/BackendService","constructInfo":{"fqn":"aws-cdk-lib.aws_apprunner.CfnService","version":"2.238.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppRunner::Service","aws:cdk:cloudformation:props":{"instanceConfiguration":{"cpu":"1024","memory":"2048"},"serviceName":"estimation-backend","sourceConfiguration":{"autoDeploymentsEnabled":true,"authenticationConfiguration":{"accessRoleArn":{"Fn::GetAtt":["AppRunnerEcrAccessRole23CA5BBD","Arn"]}},"imageRepository":{"imageIdentifier":{"Fn::Join":["",["091613706415.dkr.ecr.us-east-1.",{"Ref":"AWS::URLSuffix"},"/estimation-backend:latest"]]},"imageRepositoryType":"ECR","imageConfiguration":{"port":"8000","runtimeEnvironmentVariables":[{"name":"AUTH_REQUIRED","value":"true"},{"name":"COGNITO_REGION","value":"us-east-1"},{"name":"COGNITO_USER_POOL_ID","value":{"Ref":"UserPool6BA7E5F2"}},{"name":"COGNITO_CLIENT_ID","value":{"Ref":"UserPoolClient2F5918F7"}}]}}}}}},"BackendServiceUrl":{"id":"BackendServiceUrl","path":"EstimationBackendStack/BackendServiceUrl","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.238.0"}},"BackendServiceArn":{"id":"BackendServiceArn","path":"EstimationBackendStack/BackendServiceArn","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.238.0"}},"BackendRepoUri":{"id":"BackendRepoUri","path":"EstimationBackendStack/BackendRepoUri","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.238.0"}},"CognitoUserPoolId":{"id":"CognitoUserPoolId","path":"EstimationBackendStack/CognitoUserPoolId","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.238.0"}},"CognitoUserPoolClientId":{"id":"CognitoUserPoolClientId","path":"EstimationBackendStack/CognitoUserPoolClientId","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.238.0"}},"CognitoRegion":{"id":"CognitoRegion","path":"EstimationBackendStack/CognitoRegion","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.238.0"}},"CDKMetadata":{"id":"CDKMetadata","path":"EstimationBackendStack/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.5"},"children":{"Default":{"id":"Default","path":"EstimationBackendStack/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.238.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"EstimationBackendStack/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.238.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"EstimationBackendStack/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.238.0"}}}},"EstimationFrontendStack":{"id":"EstimationFrontendStack","path":"EstimationFrontendStack","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.238.0"},"children":{"FrontendBucket":{"id":"FrontendBucket","path":"EstimationFrontendStack/FrontendBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.Bucket","version":"2.238.0"},"children":{"Resource":{"id":"Resource","path":"EstimationFrontendStack/FrontendBucket/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucket","version":"2.238.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3::Bucket","aws:cdk:cloudformation:props":{"publicAccessBlockConfiguration":{"blockPublicAcls":true,"blockPublicPolicy":true,"ignorePublicAcls":true,"restrictPublicBuckets":true}}}},"Policy":{"id":"Policy","path":"EstimationFrontendStack/FrontendBucket/Policy","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketPolicy","version":"2.238.0"},"children":{"Resource":{"id":"Resource","path":"EstimationFrontendStack/FrontendBucket/Policy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucketPolicy","version":"2.238.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3::BucketPolicy","aws:cdk:cloudformation:props":{"bucket":{"Ref":"FrontendBucketEFE2E19C"},"policyDocument":{"Statement":[{"Action":"s3:*","Condition":{"Bool":{"aws:SecureTransport":"false"}},"Effect":"Deny","Principal":{"AWS":"*"},"Resource":[{"Fn::GetAtt":["FrontendBucketEFE2E19C","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["FrontendBucketEFE2E19C","Arn"]},"/*"]]}]},{"Action":"s3:GetObject","Condition":{"StringEquals":{"AWS:SourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":cloudfront::",{"Ref":"AWS::AccountId"},":distribution/",{"Ref":"FrontendDistributionE6EAF405"}]]}}},"Effect":"Allow","Principal":{"Service":"cloudfront.amazonaws.com"},"Resource":{"Fn::Join":["",[{"Fn::GetAtt":["FrontendBucketEFE2E19C","Arn"]},"/*"]]}}],"Version":"2012-10-17"}}}}}}}},"FrontendDistribution":{"id":"FrontendDistribution","path":"EstimationFrontendStack/FrontendDistribution","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.Distribution","version":"2.238.0"},"children":{"Origin1":{"id":"Origin1","path":"EstimationFrontendStack/FrontendDistribution/Origin1","constructInfo":{"fqn":"constructs.Construct","version":"10.4.5"},"children":{"S3OriginAccessControl":{"id":"S3OriginAccessControl","path":"EstimationFrontendStack/FrontendDistribution/Origin1/S3OriginAccessControl","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.S3OriginAccessControl","version":"2.238.0"},"children":{"Resource":{"id":"Resource","path":"EstimationFrontendStack/FrontendDistribution/Origin1/S3OriginAccessControl/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.CfnOriginAccessControl","version":"2.238.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudFront::OriginAccessControl","aws:cdk:cloudformation:props":{"originAccessControlConfig":{"name":"EstimationFrontendStackFrontOrigin1S3OriginAccessControl9E0D52B1","signingBehavior":"always","signingProtocol":"sigv4","originAccessControlOriginType":"s3"}}}}}}}},"Resource":{"id":"Resource","path":"EstimationFrontendStack/FrontendDistribution/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.CfnDistribution","version":"2.238.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudFront::Distribution","aws:cdk:cloudformation:props":{"distributionConfig":{"enabled":true,"origins":[{"domainName":{"Fn::GetAtt":["FrontendBucketEFE2E19C","RegionalDomainName"]},"id":"EstimationFrontendStackFrontendDistributionOrigin19D27FE1F","s3OriginConfig":{"originAccessIdentity":""},"originAccessControlId":{"Fn::GetAtt":["FrontendDistributionOrigin1S3OriginAccessControl51A3EFC6","Id"]}}],"defaultCacheBehavior":{"pathPattern":"*","targetOriginId":"EstimationFrontendStackFrontendDistributionOrigin19D27FE1F","cachePolicyId":"658327ea-f89d-4fab-a63d-7e88639e58f6","compress":true,"viewerProtocolPolicy":"redirect-to-https"},"customErrorResponses":[{"errorCode":403,"responseCode":200,"responsePagePath":"/index.html"},{"errorCode":404,"responseCode":200,"responsePagePath":"/index.html"}],"defaultRootObject":"index.html","httpVersion":"http2","ipv6Enabled":true}}}}}},"FrontendBucketName":{"id":"FrontendBucketName","path":"EstimationFrontendStack/FrontendBucketName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.238.0"}},"FrontendDistributionId":{"id":"FrontendDistributionId","path":"EstimationFrontendStack/FrontendDistributionId","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.238.0"}},"FrontendUrl":{"id":"FrontendUrl","path":"EstimationFrontendStack/FrontendUrl","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.238.0"}},"CDKMetadata":{"id":"CDKMetadata","path":"EstimationFrontendStack/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.5"},"children":{"Default":{"id":"Default","path":"EstimationFrontendStack/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.238.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"EstimationFrontendStack/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.238.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"EstimationFrontendStack/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.238.0"}}}},"Tree":{"id":"Tree","path":"Tree","constructInfo":{"fqn":"constructs.Construct","version":"10.4.5"}}}}}